<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-15">
<meta name="description" content="Vos premiers pas dans R. Apprenez à vous familiariser avec Rstudio et rencontrez quelques objets R courants.">

<title>Introduction à R – {repicentre}</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-6fbc3b7d0ac83ab8a043646d6c6d94a5.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-ebb886636e44b25a2e4e919ac2fea188.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-59274be23de1086093cf917752a9db10.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-31b7f221592b76be63f349b822ab6d6a.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/font-awesome-6.5.2/js/script.js"></script>
<script type="text/javascript" src="../script.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">{repicentre}</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../pathway.html"> 
<span class="menu-text">Pathway</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../explore.html"> 
<span class="menu-text">Explore</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#objectifs" id="toc-objectifs" class="nav-link active" data-scroll-target="#objectifs">Objectifs</a></li>
  <li><a href="#format-de-lexercice" id="toc-format-de-lexercice" class="nav-link" data-scroll-target="#format-de-lexercice">Format de l’exercice</a></li>
  <li><a href="#rstudio-et-r" id="toc-rstudio-et-r" class="nav-link" data-scroll-target="#rstudio-et-r">RStudio et R</a>
  <ul class="collapse">
  <li><a href="#premiers-pas-avec-rstudio" id="toc-premiers-pas-avec-rstudio" class="nav-link" data-scroll-target="#premiers-pas-avec-rstudio">Premiers pas avec RStudio</a></li>
  <li><a href="#sec-console" id="toc-sec-console" class="nav-link" data-scroll-target="#sec-console">La console</a></li>
  <li><a href="#sec-scripts" id="toc-sec-scripts" class="nav-link" data-scroll-target="#sec-scripts">Scripts</a></li>
  </ul></li>
  <li><a href="#types-de-données" id="toc-types-de-données" class="nav-link" data-scroll-target="#types-de-données">Types de données</a>
  <ul class="collapse">
  <li><a href="#numérique" id="toc-numérique" class="nav-link" data-scroll-target="#numérique">Numérique</a></li>
  <li><a href="#chaînes-de-caractères" id="toc-chaînes-de-caractères" class="nav-link" data-scroll-target="#chaînes-de-caractères">Chaînes de caractères</a></li>
  <li><a href="#booléen-logique" id="toc-booléen-logique" class="nav-link" data-scroll-target="#booléen-logique">Booléen (logique)</a></li>
  <li><a href="#déterminer-le-type-dun-objet" id="toc-déterminer-le-type-dun-objet" class="nav-link" data-scroll-target="#déterminer-le-type-dun-objet">Déterminer le type d’un objet</a></li>
  </ul></li>
  <li><a href="#sec-assignement-operator" id="toc-sec-assignement-operator" class="nav-link" data-scroll-target="#sec-assignement-operator">Création d’un objet</a>
  <ul class="collapse">
  <li><a href="#mise-à-jour-dun-objet" id="toc-mise-à-jour-dun-objet" class="nav-link" data-scroll-target="#mise-à-jour-dun-objet">Mise à jour d’un objet</a></li>
  <li><a href="#noms-dobjets" id="toc-noms-dobjets" class="nav-link" data-scroll-target="#noms-dobjets">Noms d’objets</a></li>
  </ul></li>
  <li><a href="#structures-de-données" id="toc-structures-de-données" class="nav-link" data-scroll-target="#structures-de-données">Structures de données</a>
  <ul class="collapse">
  <li><a href="#vecteurs" id="toc-vecteurs" class="nav-link" data-scroll-target="#vecteurs">Vecteurs</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction à R</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Core</div>
    <div class="quarto-category">R Basics</div>
    <div class="quarto-category">Data Types</div>
  </div>
  </div>

<div>
  <div class="description">
    Vos premiers pas dans R. Apprenez à vous familiariser avec Rstudio et rencontrez quelques objets R courants.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 15, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="objectifs" class="level2">
<h2 class="anchored" data-anchor-id="objectifs">Objectifs</h2>
<ul>
<li>Se familiariser avec RStudio</li>
<li>Apprendre à travailler avec la console</li>
<li>Créer et exécuter un script</li>
<li>Créer des objets R de base, y compris des vecteurs et des cadres de données</li>
</ul>
</section>
<section id="format-de-lexercice" class="level2">
<h2 class="anchored" data-anchor-id="format-de-lexercice">Format de l’exercice</h2>
<p>Ces exercices se présentent sous la forme d’un didacticiel à rythme libre contenant de courtes explications des concepts clés, des exemples et des exercices à suivre. Le cours utilise une approche d’apprentissage par la pratique, et bien que cette première session commence par une exploration de l’interface de RStudio, les sessions suivantes se concentreront fortement sur l’écriture de votre propre code.</p>
<p>Les instructions pour les exercices seront données dans les formats suivants :</p>
<div class="setup">
<p>Il s’agit d’un <strong>bloc d’action générale</strong>. Vous le verrez généralement au début d’une session avec des instructions sur la configuration de cette leçon.</p>
<p><br> <strong>Exemple:</strong> Ouvrez un nouveau script vierge et nommez-le <code>mon_premier_script.R</code>.</p>
</div>
<div class="write">
<p>Il s’agit d’un <strong>bloc de code</strong> Il s’agit d’un exercice de codage dans lequel vous écrirez votre propre code.</p>
<p><br> <strong>Exemple:</strong> Créez un objet appelé <code>region</code> qui contient la valeur <code>"Mandoul"</code>.</p>
</div>
<div class="look">
<p>Il s’agit d’un <strong>bloc d’observation</strong> Il contient des instructions sur un objet que vous devez observer ou étudier.</p>
<p><br> <strong>Exemple:</strong> Inspecter l’interface de RStudio.</p>
</div>
<p>Au cours de ces exercices, vous rencontrerez peut-être des erreurs, qui se produisent lorsque R n’est pas en mesure d’exécuter une commande. Cela peut se produire pour de nombreuses raisons : vous avez peut-être mal orthographié le nom d’un objet, demandé à R de rechercher un fichier qui n’existe pas ou fourni le mauvais type de données à une fonction. Lorsqu’une erreur se produit, R <strong>s’arrêter</strong> les calculs en cours et vous donne un message expliquant ce qui s’est passé. <strong>Il est tout à fait normal d’avoir des erreurs et cela arrive à tous les programmeurs</strong> qu’ils soient novices ou experts. À l’instar d’un langage naturel, vous vous améliorerez dans l’utilisation de R au fur et à mesure que vous vous entraînerez et que vous travaillerez sur vos erreurs.</p>
</section>
<section id="rstudio-et-r" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-et-r">RStudio et R</h2>
<p><em>R</em> est un <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="As opposed to object oriented languages which are more adept at building complex programs such as operating systems.">langage de programmation fonctionnel</span> qui peut être utilisé pour nettoyer et manipuler des données, effectuer des analyses (en particulier des analyses statistiques), visualiser des résultats, et bien plus encore.</p>
<p><em>RStudio</em> est un logiciel qui fournit une interface conviviale pour R (également appelé IDE, pour Integrated Development Environment). Bien que l’utilisation d’une interface graphique ne soit pas obligatoire, elle est fortement recommandée pour les débutants.</p>
<section id="premiers-pas-avec-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="premiers-pas-avec-rstudio">Premiers pas avec RStudio</h3>
<p>Commençons par le commencement !</p>
<div class="setup">
<p>Ouvrez RStudio en utilisant le menu de démarrage ou le raccourci du bureau ; si RStudio est déjà ouvert, veuillez le fermer et l’ouvrir à nouveau.</p>
</div>
<p>Vous devriez voir une interface qui ressemble à ceci :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/core/01_introduction/01_rstudio_interface_en.png" class="img-fluid figure-img"></p>
<figcaption>Vue de l’interface de l’IDE Rstudio à l’ouverture</figcaption>
</figure>
</div>
<div class="look">
<p>Inspecter l’interface RStudio.</p>
</div>
<p>Vous disposerez de trois ou quatre panneaux, dont :</p>
<section id="coin-supérieur-droit" class="level4">
<h4 class="anchored" data-anchor-id="coin-supérieur-droit">Coin supérieur droit</h4>
<p>En haut à droite se trouve un panneau avec plusieurs onglets. La plupart d’entre eux dépassent le cadre de ce cours, mais nous utiliserons les deux onglets suivants dans le cadre de ce cours :</p>
<ul>
<li><p><em>Environnement.</em> Liste des objets enregistrés par l’utilisateur dans la session en cours. Comme vous venez de démarrer une nouvelle session, votre environnement doit être vide.</p></li>
<li><p><em>Historique.</em> Un enregistrement de toutes les commandes que vous avez exécutées au cours de la session actuelle.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez considérer une session R comme vous le feriez en démarrant un ordinateur. Lorsqu’une session démarre, tout est vierge et prêt pour le calcul, de la même manière qu’il n’y a aucun programme ouvert lorsque vous allumez votre ordinateur pour la première fois. En général, nous vous encourageons à arrêter et à démarrer vos sessions R régulièrement. <em>l’éteindre et le rallumer</em> pour corriger certains de vos bogues.</p>
</div>
</div>
</section>
<section id="coin-inférieur-droit" class="level4">
<h4 class="anchored" data-anchor-id="coin-inférieur-droit">Coin inférieur droit</h4>
<p>En bas à droite se trouve un autre panneau à onglets multiples, comprenant les éléments suivants</p>
<ul>
<li><em>Fichiers.</em> Un explorateur de fichiers pour le répertoire de travail, qui est l’emplacement du dossier dans lequel R travaille actuellement.</li>
<li><em>Tracés.</em> Un emplacement où RStudio affichera <em>statique</em> Cet onglet doit être vide pour le moment.</li>
<li><em>Paquets.</em> Liste de tous les paquets R installés sur votre ordinateur. Les paquets sont des collections de fonctions qui permettent d’étendre les fonctionnalités de R. Nous les aborderons plus en détail dans la section <a href="02_import_data.html#sec-packages">prochaine leçon</a>.</li>
<li><em>Aide.</em> Un endroit pour lire les pages d’aide et la <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="Documentation refers to additional narrative text either in a code file or an external document that is written to help folks understand what a piece of code, function, or package does and how it should be used. Code documentation is a bit analogous to creating a data dictionary for a set of survey data and is an invaluable part of making robust and reusable code">documentation</span> pour les fonctions et les paquets.</li>
<li><em>Visualisateur.</em> Un emplacement où RStudio affichera des sorties html telles que des tableaux, des widgets interactifs ou même des tableaux de bord complets.</li>
</ul>
</section>
<section id="côté-gauche" class="level4">
<h4 class="anchored" data-anchor-id="côté-gauche">Côté gauche</h4>
<ul>
<li>À gauche (ou en bas à gauche si vous avez quatre panneaux), vous devriez voir le bouton <em>console</em> où R est exécuté.</li>
<li>En haut à gauche (si vous avez quatre panneaux) se trouve n’importe quelle fenêtre ouverte. <em>ouverts</em>.</li>
</ul>
<p>Dans les deux sections suivantes, nous parlerons plus en détail de la console et des scripts.</p>
</section>
</section>
<section id="sec-console" class="level3">
<h3 class="anchored" data-anchor-id="sec-console">La console</h3>
<p>La console est <strong>où R lui-même est exécuté</strong>.</p>
<p>Chaque fois que vous ouvrez une nouvelle session, R commence par imprimer quelques informations sur votre configuration, telles que le numéro de version de R. En dessous de ces informations, vous trouverez une ligne contenant le numéro de version de R. En dessous de ces informations, il devrait y avoir une ligne contenant le code <code>&gt;</code> et un curseur clignotant. Pour exécuter une commande dans R, il vous suffit de la taper après ceci <code>&gt;</code> et d’appuyer sur <code>Enter</code>. R traitera alors votre code et imprimera le résultat (s’il y en a un). Un nouveau <code>&gt;</code> s’affichera alors, prête pour la commande suivante.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si la dernière ligne affichée dans la console commence par un <code>+</code> au lieu d’un <code>&gt;</code> cela signifie que la console n’est pas prête à recevoir une nouvelle commande, soit parce qu’elle est encore en train de traiter une commande précédente, soit parce qu’elle a reçu un bout de <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="Incomplete code is the R equivalent of an incomplete sentence. Typically this will occur when we forget to close a paired character, such as a parenthesis or quotation.">code incomplet</span>. Si, à un moment donné, vous souhaitez annuler une commande en cours ou incomplète, appuyez sur la touche <code>Esc</code>.</p>
</div>
</div>
<div class="write">
<p>Exécutez les commandes suivantes dans la console, une ligne à la fois, et observez les résultats.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">+</span> <span class="dv">90</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">*</span> <span class="dv">171</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">189</span> <span class="sc">/</span> <span class="fl">36.6</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dv">92</span><span class="sc">^</span><span class="dv">3</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>(<span class="dv">12</span> <span class="sc">+</span> <span class="dv">9</span>)<span class="sc">^</span><span class="dv">4</span> <span class="sc">/</span> <span class="dv">1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Exécutez maintenant la commande suivante. Notez que la dernière ligne de commande <code>)</code> est manquante, ce qui rend la commande incomplète. Que se passe-t-il lorsque vous faites cela ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">+</span> <span class="dv">97</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Vous avez peut-être remarqué dans les exemples ci-dessus que notre code comporte beaucoup d’espaces entre les caractères. Ce n’est pas un hasard. La meilleure pratique consiste à inclure des espaces autour de la plupart des opérateurs, tels que <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>&lt;</code>, <code>&gt;</code>, <code>=</code> et <code>&lt;-</code>. Non seulement ces espaces facilitent la lecture et la compréhension de votre code, mais dans certains cas (rares), ils peuvent même être nécessaires pour éviter des erreurs. Cela dit, il faut savoir qu’il y a un petit nombre d’opérateurs qui devraient <em>pas</em> ne doivent pas être entourés d’espaces, tels que <code>^</code>, <code>.</code> et <code>:</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">29</span><span class="fl">+4.8</span><span class="sc">/</span><span class="dv">3</span><span class="sc">*</span><span class="dv">3</span>           <span class="co"># BAD</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">29</span> <span class="sc">+</span> <span class="fl">4.8</span> <span class="sc">/</span> <span class="dv">3</span> <span class="sc">*</span> <span class="dv">3</span>   <span class="co"># GOOD</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">^</span> <span class="dv">2</span> <span class="co"># BAD</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">^</span><span class="dv">2</span>   <span class="co"># GOOD</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous pouvons également gérer <em>fonctions</em> dans la console. Nous aborderons les fonctions plus en détail <a href="../sessions_core/01_introduction.html#sec-functions">plus loin dans cette leçon</a> mais en attendant, sachez que l’idée des fonctions dans R est très similaire à celle d’Excel, où vous êtes sans doute familier avec des fonctions telles que <code>SUM</code> ou <code>MEAN</code>.</p>
<div class="write">
<p>Exécutez les commandes suivantes dans la console (une ligne à la fois).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the minimum value</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(<span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">56</span>, <span class="fl">0.3</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the maximum value</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(<span class="dv">568</span>, <span class="dv">258</span>, <span class="dv">314</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="sec-scripts" class="level3">
<h3 class="anchored" data-anchor-id="sec-scripts">Scripts</h3>
<p>Les scripts sont des fichiers texte qui contiennent un <strong>série de commandes</strong> pour un langage de programmation particulier. L’extension du fichier indique le langage dans lequel les commandes ont été écrites. <code>.R</code>. Les scripts nous permettent de créer du code qui peut être réutilisé, partagé et même automatisé.</p>
<section id="écrire-son-premier-scénario" class="level4">
<h4 class="anchored" data-anchor-id="écrire-son-premier-scénario">Écrire son premier scénario</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/core/01_introduction/02_new_script.png" class="img-fluid figure-img"></p>
<figcaption>Etapes pour créer un nouveau script dans l’IDE RStudio</figcaption>
</figure>
</div>
<p>Pour créer un nouveau script, suivez le menu <code>File &gt; New File &gt; R Script</code>. Vous pouvez également cliquer sur la petite icône verte <code>+</code> juste en dessous de l’icône <code>File</code> ou utiliser le raccourci clavier <code>CTRL+SHIFT+N</code>. Ce nouveau et <strong>non sauvegardé</strong> apparaîtra sous la forme d’un document vierge dans le panneau supérieur gauche.</p>
<p>Pour enregistrer votre script, utilisez le menu <code>File &gt; Save As</code> ou le raccourci clavier <code>CTRL+S</code>.</p>
<div class="setup">
<p>Créer et enregistrer un nouveau script appelé <code>discovery.R</code>. N’oubliez pas d’inclure l’élément <code>.R</code> dans le script. Pour l’instant, vous pouvez l’enregistrer sur votre bureau ou à tout autre endroit approprié, mais nous parlerons plus en détail de l’organisation de vos scripts dans la section <a href="../sessions_core/02_import_data.html">prochaine session</a>.</p>
</div>
</section>
<section id="exécuter-du-code-à-partir-dun-script" class="level4">
<h4 class="anchored" data-anchor-id="exécuter-du-code-à-partir-dun-script">Exécuter du code à partir d’un script</h4>
<p>Pour exécuter du code à partir d’un script, placez simplement votre curseur sur la ligne que vous souhaitez exécuter (ou sélectionnez plusieurs lignes) et effectuez l’une des opérations suivantes :</p>
<ul>
<li>Cliquez sur le bouton <code>Run</code> en haut à droite de la fenêtre de script</li>
<li>Utilisez le raccourci <code>CTRL+Enter</code> (le curseur passera ensuite à la ligne suivante)</li>
<li>Utiliser le raccourci <code>ALT+Enter</code> (le curseur reste ensuite sur la ligne en cours)</li>
</ul>
<div class="write">
<p>Copiez le code que vous avez exécuté dans les exercices précédents dans votre script et exécutez-le en utilisant chacune des méthodes ci-dessus.</p>
<p>A partir de maintenant, vous écrirez votre code dans votre script et l’exécuterez à partir de là, sauf indication contraire dans les instructions.</p>
</div>
</section>
<section id="sec-comments" class="level4">
<h4 class="anchored" data-anchor-id="sec-comments">Commentaires</h4>
<p>En R, tout texte précédé d’un <code>#</code> (jusqu’à la fin d’une ligne) est appelé un <em>commentaire</em>. R ne considère pas les commentaires comme du code et les ignore lorsque vous exécutez vos scripts. Les commentaires sont donc un excellent moyen de documenter votre code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a comment</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span>  <span class="co"># This is also a comment</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il est utile pour l’avenir, pour vous et pour les autres, de commencer vos scripts par quelques lignes commentées fournissant des informations sur le fichier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### IMPORT &amp; PREPARE DATA ####</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Author :  Mathilde Mousset</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creation Date : 23/11/2024</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Last Update : 30/11/2024</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Description : Import and clean measles surveillance data from Moissala</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="write">
<p>Ajoutez quelques commentaires au début de votre script pour le décrire.</p>
</div>
<p>Les commentaires sont également un moyen pratique de diviser les scripts plus longs en sections thématiques, telles que “Importation de données”, “Analyse”, “Visualisation”, etc. Par exemple :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NAME OF SECTION 1 -----------------------------------------------             </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># NAME OF SECTION 2 -----------------------------------------------             </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="write">
<p>Utilisez les commentaires pour créer des sections dans votre script qui correspondent aux sections principales de ce tutoriel.</p>
</div>
<p>Enfin, les commentaires nous permettent d’écrire des notes utiles pour nos collègues (et nos futurs collègues) qui peuvent les aider à comprendre le code et la raison pour laquelle nous l’avons écrit de cette manière. L’orientation générale est de se concentrer sur les commentaires qui expliquent le “pourquoi” plutôt que le “quoi”. En effet, le “quoi” d’un code bien écrit devrait être relativement explicite.</p>
<p>Ce commentaire, par exemple, est tout à fait superflu :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">3</span>  <span class="co"># Code to add one to three</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En comparaison, voici quelques cas d’utilisation qui mériteraient d’être commentés :</p>
<ul>
<li>Vous définissez une constante, par exemple une valeur seuil de séroprévalence. Vous pouvez ajouter un commentaire indiquant la référence d’où provient la valeur.</li>
<li>Votre code contient une valeur ou un nom de fichier qui doit être mis à jour chaque semaine. Vous devez l’indiquer dans un commentaire afin que toute personne utilisant le code en soit informée.</li>
<li>Vous utilisez une commande ou un paquetage rare que votre collègue ne connaît peut-être pas ou qu’il trouve contre-intuitif. Vous pouvez utiliser un commentaire pour expliquer le raisonnement qui sous-tend cette décision.</li>
</ul>
<p>Ceci étant dit, vous apprenez, et les scripts que vous écrivez pendant ce cours sont vos notes, alors n’hésitez pas à utiliser autant de commentaires (du type “quoi” et “pourquoi”) que vous le souhaitez. Vous écrirez naturellement moins de commentaires à l’avenir, lorsque certaines choses qui vous semblent étrangères aujourd’hui deviendront naturelles.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez commenter une ligne sélectionnée avec le raccourci <code>CTRL+SHIFT+C</code>.</p>
<p>Vous pouvez ajouter une section de premier niveau avec <code>CTRL+SHIFT+R</code>.</p>
</div>
</div>
<div class="write">
<p>Ajoutez quelques commentaires pour décrire le code que vous avez écrit jusqu’à présent dans votre script.</p>
</div>
</section>
</section>
</section>
<section id="types-de-données" class="level2">
<h2 class="anchored" data-anchor-id="types-de-données">Types de données</h2>
<p>R dispose de plusieurs <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="Just like Excel, R can tell the difference between a date and a number. These differences refer to differences in the type of a piece of data.">types de données</span>. Ceux que nous verrons le plus souvent dans ce cours sont les suivants :</p>
<ul>
<li>numérique</li>
<li>chaîne de caractères (texte)</li>
<li>booléen (VRAI / FAUX)</li>
<li>date</li>
<li>facteur</li>
</ul>
<section id="numérique" class="level3">
<h3 class="anchored" data-anchor-id="numérique">Numérique</h3>
<p>Le type numérique comprend à la fois <em>entiers</em> et les <em>doubles</em> (nombres comprenant une décimale) et peuvent être créés en écrivant simplement la valeur “nue” dans votre script ou votre console.</p>
</section>
<section id="chaînes-de-caractères" class="level3">
<h3 class="anchored" data-anchor-id="chaînes-de-caractères">Chaînes de caractères</h3>
<p><em>Cordes</em> sont la version R du texte et peuvent être créées en entourant le texte de guillemets simples ou doubles, par exemple <code>"district"</code> ou <code>'cases'</code> (les guillemets doubles sont généralement considérés comme la meilleure pratique).</p>
<div class="write">
<p>Comparez la sortie dans la console pour les commandes suivantes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">28</span>         <span class="co"># numeric</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="st">"28"</span>       <span class="co"># text</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dv">28</span> <span class="sc">+</span> <span class="st">"28"</span>  <span class="co"># produces an error</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>La dernière commande ci-dessus donnera lieu à une erreur car nous ne pouvons pas effectuer d’opérations arithmétiques combinant du texte et des nombres.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>R est sensible à la casse, ce qui signifie que la chaîne <code>"ABC"</code> n’est pas identique à <code>"abc"</code>.</p>
</div>
</div>
<div class="{callout-note}">
<p>Si vous souhaitez créer une chaîne de caractères contenant des guillemets, la meilleure pratique consiste à <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="Certain characters in R are special, meaning that they are usually a type of command unto themselves. Whenever you'd like to use one of these special characters in normal text, you need to explicitly tell R to ignore the special functionality of the character. This process is called   the special character">s’échapper</span> le caractère en le faisant précéder d’un “\”, c’est-à-dire : <em>échapper</em><code>"She said \"Hello\" then left"</code> ou <code>'it\'s a beautiful day'</code>. De manière équivalente, si vous avez utilisé une double citation pour créer la chaîne, vous pouvez utiliser librement des guillemets simples à l’intérieur de celle-ci (par ex : <code>"it's a beautiful day"</code>) et vice versa (c’est-à-dire : <code>'She said "Hello" then left'</code>).</p>
</div>
</section>
<section id="booléen-logique" class="level3">
<h3 class="anchored" data-anchor-id="booléen-logique">Booléen (logique)</h3>
<p>Le type booléen (ou “logique”) stocke des valeurs vrai/faux et est créé en écrivant soit <code>TRUE</code> ou <code>FALSE</code> sans guillemets.</p>
<p>En interne, R pense à <code>TRUE</code> et <code>FALSE</code> comme une version spéciale de <code>1</code> et <code>0</code> respectivement, et les valeurs booléennes peuvent être facilement traduites en ces équivalents numériques pour les opérations arithmétiques.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous trouverez peut-être des personnes qui utilisent <code>T</code> ou <code>F</code> mais cela est déconseillé car <code>T</code> et <code>F</code> peuvent également être utilisés comme noms d’objets ou de variables. <code>TRUE</code> et <code>FALSE</code> sont cependant <em>protégés</em> dans R, ce qui signifie qu’ils ne peuvent pas être réaffectés à une autre valeur.</p>
</div>
</div>
</section>
<section id="déterminer-le-type-dun-objet" class="level3">
<h3 class="anchored" data-anchor-id="déterminer-le-type-dun-objet">Déterminer le type d’un objet</h3>
<p>Il existe plusieurs fonctions permettant de déterminer le type d’un objet (souvent appelé le <em>classe</em> de l’objet en R).</p>
<div class="write">
<p>Tapez les commandes suivantes dans votre script et exécutez-les :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the Type of an Object</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">28</span>)  </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="st">"Mandoul"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Test the Type of an Object</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="dv">28</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="st">"Mandoul"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(<span class="st">"Mandoul"</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="cn">TRUE</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(<span class="cn">TRUE</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(<span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="sec-assignement-operator" class="level2">
<h2 class="anchored" data-anchor-id="sec-assignement-operator">Création d’un objet</h2>
<p>En R, presque tout est un <strong>objet</strong> y compris les fonctions, les valeurs scalaires et d’autres structures de données plus complexes. Avant de présenter ces structures, faisons un détour important pour discuter de la manière dont les objets sont enregistrés dans votre environnement.</p>
<p>Souvent, nous souhaitons réutiliser les mêmes valeurs ou données tout au long d’un script et il est donc très utile de les stocker sous forme d’objets dans notre environnement. Pour ce faire, nous utilisons la classe <em>opérateur d’affectation</em>, <code>&lt;-</code>.</p>
<div class="write">
<p>Regardez le panneau d’environnement en haut à droite, vérifiez qu’il est vide, puis tapez la commande suivante dans votre script et exécutez-la pour enregistrer une variable appelée <code>cases</code> dans votre environnement.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">&lt;-</span> <span class="dv">28</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Regardez à nouveau l’environnement. Est-il toujours vide ?</p>
</div>
<p>Si vous souhaitez accéder à la valeur de votre nouvel objet, <code>cases</code> il vous suffit de <strong>exécuter son nom</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>cases</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>La raison pour laquelle nous avons besoin de mettre les chaînes de caractères entre guillemets est en fait pour permettre à R de différencier les chaînes de caractères (<code>"cases"</code> et les noms d’objets <code>cases</code>).</p>
</div>
</div>
<p>Une fois créés, les objets peuvent être utilisés dans d’autres commandes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cases <span class="sc">+</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="write">
<p>Dans votre script, créez un objet appelé <code>region</code> qui contient la valeur <code>"Mandoul"</code>. Le voyez-vous dans votre environnement ?</p>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>N’oubliez pas que nous devons toujours entourer <code>&lt;-</code> par des espaces afin d’améliorer la lisibilité et d’éviter les erreurs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">3</span>     <span class="co"># BAD</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span>   <span class="co"># GOOD</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<section id="mise-à-jour-dun-objet" class="level3">
<h3 class="anchored" data-anchor-id="mise-à-jour-dun-objet">Mise à jour d’un objet</h3>
<p>Nous souhaitons souvent mettre à jour la valeur stockée dans un objet. Pour ce faire, il suffit d’assigner une nouvelle valeur avec la même syntaxe que celle utilisée lors de la création de l’objet :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">&lt;-</span> <span class="dv">32</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="write">
<p>Mettre à jour la valeur de <code>region</code> en <code>"Moyen Chari"</code>.</p>
</div>
</section>
<section id="noms-dobjets" class="level3">
<h3 class="anchored" data-anchor-id="noms-dobjets">Noms d’objets</h3>
<p>Pour nommer vos objets, il existe quelques règles (relativement) strictes :</p>
<ul>
<li>Ne pas commencer par un chiffre</li>
<li>Ne pas utiliser d’espaces (utiliser un <code>_</code> à la place)</li>
<li>N’utilisez pas de valeurs protégées (comme <code>TRUE</code> et <code>FALSE</code>) ou des noms de fonctions (comme <code>mean</code>)</li>
<li>N’utilisez pas de majuscules</li>
</ul>
<p>Au-delà de ces règles strictes, il existe également des bonnes pratiques plus subjectives et des styles personnels. En règle générale, les noms doivent être courts et descriptifs :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">19</span>                             <span class="co"># BAD (not informative)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>age_du_patient_a_l_admission <span class="ot">&lt;-</span> <span class="dv">19</span>  <span class="co"># BAD (too long)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">19</span>                           <span class="co"># GOOD</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Donner à vos objets des noms clairs et informatifs contribue à rendre votre code lisible, ce qui le rend facile à comprendre pour les autres sans avoir besoin de consulter le dictionnaire de données toutes les deux secondes.</p>
</section>
</section>
<section id="structures-de-données" class="level2">
<h2 class="anchored" data-anchor-id="structures-de-données">Structures de données</h2>
<p>Jusqu’à présent, nous nous sommes contentés d’étudier des objets simples qui stockent des valeurs individuelles. Nous allons maintenant nous intéresser à des structures plus complexes qui peuvent stocker des ensembles entiers de données.</p>
<section id="vecteurs" class="level3">
<h3 class="anchored">Vecteurs</h3>
<p>Il est possible de rassembler plusieurs valeurs (telles que des valeurs numériques ou des chaînes de caractères) en un seul objet, appelé <em>vecteur</em>.</p>
<p>Techniquement, il existe plusieurs types de vecteurs, par exemple :</p>
<ul>
<li><em>Vecteurs simples</em> (ou <em>vecteurs atomiques</em>) ne peuvent contenir qu’un seul type de valeurs. Par exemple, un tableau numérique <code>2, 4, 6</code> ou un tableau de chaînes de caractères <code>"Mandoul", "Moyen Chari"</code>.</li>
<li><em>Vecteurs récursifs</em> (généralement appelés <em>listes</em>) sont beaucoup plus complexes et peuvent contenir plusieurs dimensions et types de données. Nous ne les aborderons pas dans cette leçon.</li>
</ul>
<p>Ce cours n’entrera pas dans les détails des concepts plus abstraits qui sous-tendent ces structures et se concentrera uniquement sur celles que vous rencontrerez le plus souvent dans votre travail quotidien.</p>
<section id="vecteurs-simples" class="level4">
<h4 class="anchored">Vecteurs simples</h4>
<p>Les vecteurs simples peuvent contenir une ou plusieurs valeurs <em>d’un seul type de données</em> Ils ont donc deux propriétés essentielles : <strong>la longueur</strong> et <strong>type</strong>. Dans le cadre de ce cours, nous utiliserons indifféremment les termes “vecteur simple” et “vecteur” (comme c’est généralement le cas dans la communauté R).</p>
<p>Techniquement, vous avez déjà créé votre premier vecteur simple lorsque vous avez construit <code>cases</code> et <code>region</code>. Il s’agissait simplement de vecteurs avec un <strong>longueur d’un</strong>. Pour créer un vecteur avec plus d’une valeur, nous utiliserons la fonction <code>c()</code> ( [mnémonique]{.hovertip bs-toggle=‘tooltip’ bs-title=’ is the first letter of “concatenate”’}) :<code>c</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="write">
<p>Mise à jour <code>cases</code> avec les valeurs ci-dessus et mettre à jour <code>region</code> pour créer un vecteur de chaînes de caractères contenant les valeurs suivantes : Mandoul, Moyen-Chari, Logone Oriental, Tibesti et Logone Occidental : Mandoul, Moyen-Chari, Logone Oriental, Tibesti et Logone Occidental.</p>
</div>
<p>Nous pouvons maintenant utiliser des fonctions sur les objets que nous avons créés :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cases)      <span class="co"># calculate the mean value of the cases vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(region)  <span class="co"># convert all the values in region to upper case</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MANDOUL"           "MOYEN-CHARI"       "LOGONE ORIENTAL"  
[4] "TIBESTI"           "LOGONE OCCIDENTAL"</code></pre>
</div>
</div>
<div class="write">
<p>Utilisons quelques fonctions ! Essayez d’écrire un code qui fait ce qui suit :</p>
<ul>
<li><p>Calculer la somme de <code>cases</code> en utilisant la fonction <code>sum()</code></p></li>
<li><p>Convertir le texte en <code>region</code> en minuscules à l’aide de la fonction <code>tolower()</code></p>
<p>:::</p></li>
</ul>
<section id="accès-aux-valeurs-dun-vecteur" class="level3">
<h3 class="anchored" data-anchor-id="accès-aux-valeurs-dun-vecteur">Accès aux valeurs d’un vecteur</h3>
<p>Il est possible d’accéder à la valeur d’un vecteur en utilisant des crochets contenant l’indice (position) de la valeur souhaitée, c’est-à-dire : <code>[3]</code> ou <code>[189]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>cases[<span class="dv">2</span>]   <span class="co"># 2nd value of cases</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>cases[<span class="dv">10</span>]  <span class="co"># 10th value of cases</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Oups il n’existe pas ! Nous reviendrons sur ce que cette <code>NA</code> signifie dans le <a href="../sessions_core/01_introduction.html#sec-missing-values">Valeurs manquantes</a>.</p>
<p>Nous pouvons également accéder à un <em>gamme</em> de valeurs, comme nous pourrions le faire dans Excel. Pour créer une plage, nous utilisons la fonction <code>:</code> pour séparer les indices minimum et maximum souhaités :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>cases[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]  <span class="co"># 2nd to 4th values of cases</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 8 0</code></pre>
</div>
</div>
<div class="write">
<p>Obtenir la 3ème valeur de <code>region</code>.</p>
<p>Ecrire du code pour accéder aux valeurs “Mandoul” et “Moyen-Chari” dans le vecteur <code>region</code>.</p>
</div>
</section>
<section id="trames-de-données" class="level3">
<h3 class="anchored">Trames de données</h3>
<p><em>Trames de données</em> sont des str uctures <span class="hovertip" data-bs-toggle="tooltip" data-bs-title="Technically they are a special type of list, that is composed of multiple vectors of the same length.">structures</span> / tableaux en 2D avec des lignes et des colonnes. Il s’agit d’une structure très similaire à celle d’un “tableau” dans Excel. En tant qu’épidémiologistes, ce type de structure de données est peut-être le plus utile et vous l’utiliserez probablement au quotidien, pour stocker les données de la liste de diffusion par exemple.</p>
<section id="création-dun-cadre-de-données" class="level4">
<h4 class="anchored" data-anchor-id="création-dun-cadre-de-données">Création d’un cadre de données</h4>
<p>Nous pouvons créer un cadre de données à l’aide de la fonction <code>data.frame()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">col1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">9</span>),</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">col2 =</span> <span class="fu">c</span>(<span class="st">"a bit of text"</span>, <span class="st">"some more text"</span>, <span class="st">"hello"</span>, <span class="st">"epidemiologists!"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  col1             col2
1    1    a bit of text
2    4   some more text
3    2            hello
4    9 epidemiologists!</code></pre>
</div>
</div>
<p>Voir comment <code>col1</code> a été créé à partir d’un tableau numérique, et <code>col2</code> à partir d’un tableau de chaînes de caractères. Ici, nous avons choisi les noms des colonnes (<code>col1</code> et <code>col2</code>), ce qui est normal, mais vous pouvez exécuter le code sans pour voir comment R gère les noms par défaut.</p>
<div class="write">
<p>Dans votre script, créez un cadre de données appelé <code>data_cases</code> qui contient <code>cases</code> dans une colonne et <code>region</code> dans l’autre.</p>
</div>
</section>
<section id="sec-dataframe-functions" class="level4">
<h4 class="anchored" data-anchor-id="sec-dataframe-functions">Exploration d’un cadre de données</h4>
<p><code>data_cases</code> devrait maintenant apparaître dans votre environnement. Vous pouvez cliquer sur le cercle bleu avec un triangle blanc pour obtenir des informations supplémentaires, ou cliquer sur son nom pour ouvrir l’objet dans le même volet que les scripts pour le visualiser.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/core/01_introduction/03_environment.png" class="img-fluid figure-img"></p>
<figcaption>Le cadre de données data_case apparaît désormais dans le volet Environnement.</figcaption>
</figure>
</div>
<p>Il existe plusieurs fonctions pratiques permettant d’explorer une base de données :</p>
<div class="write">
<p>Exécutez les commandes suivantes et essayez de déterminer le type d’informations qu’elles renvoient.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_cases)     <span class="co"># STRucture of the object</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_cases)     <span class="co"># DIMension of the object</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data_cases)    <span class="co"># Number of ROWs</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(data_cases)    <span class="co"># Number of COLumns</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data_cases)   <span class="co"># column NAMES</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Pratiquons un peu plus ! R est livré avec plusieurs ensembles de données intégrés auxquels il est possible d’accéder directement, dont un appelé <code>iris</code>. C’est pratique aujourd’hui car nous n’avons pas encore appris à importer des données dans R (ne vous inquiétez pas, nous travaillerons sur les données de listes de lignes à partir de la deuxième session).</p>
<p>Nous pouvons voir les premières lignes de cette base de données à l’aide de la fonction <code>head()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<div class="write">
<p>Combien de lignes et de colonnes y a-t-il dans <code>iris</code>? Quels sont les noms de ses colonnes ?</p>
</div>
</section>
<section id="accéder-aux-données-dun-cadre-de-données" class="level4">
<h4 class="anchored">Accéder aux données d’un cadre de données</h4>
<p>En R, il existe plusieurs méthodes pour accéder aux lignes et/ou aux colonnes d’un cadre de données. Dans cette session d’introduction, nous nous concentrerons sur la méthode <code>[ ]</code> syntaxe.</p>
<p>Nous utilisons les crochets pour accéder à des valeurs individuelles ou à des plages de valeurs dans notre cadre de données. Pour ce faire, nous devons donner à R un numéro de ligne (ou un intervalle de lignes) et un numéro/nom de colonne (ou un intervalle de colonnes), en utilisant la syntaxe suivante <code>[row, column]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="dv">1</span>, <span class="dv">2</span>]          <span class="co"># the value of row one, column 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mandoul"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="dv">1</span>, <span class="st">"region"</span>]   <span class="co"># first value in the region column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mandoul"</code></pre>
</div>
</div>
<p>Si nous voulons accéder à toutes les lignes (ou colonnes), nous pouvons simplement laisser un espace à la place du numéro/nom :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="dv">1</span>, ]           <span class="co"># values of all columns in row one</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cases  region
1     2 Mandoul</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, ]         <span class="co"># values of all columns for rows 2 through 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cases         region
2     5       Sud Kivu
3     8 Kasai oriental
4     0          Kasai</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>data_cases[ , <span class="st">"region"</span>]   <span class="co"># values of all rows for the region column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mandoul"        "Sud Kivu"       "Kasai oriental" "Kasai"         
[5] "Haut Katanga"  </code></pre>
</div>
</div>
<p>Nous pouvons même sélectionner plusieurs indices non consécutifs en utilisant un tableau numérique :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), ]  <span class="co"># lines 1 and 3 (all columns)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cases         region
1     2        Mandoul
3     8 Kasai oriental</code></pre>
</div>
</div>
<p>Soyez prudent, car l’option <em>type</em> de sortie renvoyé lors de l’extraction de données d’un cadre de données peut parfois dépendre du style d’indexation utilisé :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_cases[<span class="dv">1</span> , ])   <span class="co"># returns a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1 obs. of  2 variables:
 $ cases : num 2
 $ region: chr "Mandoul"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_cases[ , <span class="dv">1</span>])   <span class="co"># returns a simple vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:5] 2 5 8 0 4</code></pre>
</div>
</div>
<p>Autre syntaxe pour extraire les différentes colonnes d’une base de données :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="dv">2</span>]           <span class="co"># returns the second column (as a data frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          region
1        Mandoul
2       Sud Kivu
3 Kasai oriental
4          Kasai
5   Haut Katanga</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>data_cases[<span class="st">"region"</span>]    <span class="co"># returns the region column (as a data frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          region
1        Mandoul
2       Sud Kivu
3 Kasai oriental
4          Kasai
5   Haut Katanga</code></pre>
</div>
</div>
<p>Notez que ces commandes renvoient des cadres de données à une seule colonne.</p>
<div class="write">
<p>Écrire du code pour :</p>
<ul>
<li><p>extraire la troisième valeur de la <code>region</code> de votre cadre de données</p></li>
<li><p>extraire les deuxième et troisième valeurs de la colonne <code>cases</code> colonne</p></li>
<li><p>calculer la somme des <code>cases</code> colonne de votre cadre de données</p>
<p>:::</p></li>
</ul>
<section id="sec-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="sec-missing-values">Valeurs manquantes</h2>
<p>En tant qu’épidémiologistes, nous travaillons constamment avec des données manquantes. Dans R, les valeurs manquantes sont codées à l’aide d’une valeur spéciale : <code>NA</code> (signifiant <strong>N</strong>ot <strong>A</strong>vailable). <code>NA</code> est quelque peu unique dans R, car il n’a pas en soi d’objectif fixe. <em>type</em> il prend plutôt le type des valeurs qui l’entourent. Par exemple, un <code>NA</code> dans une colonne numérique prendra alors le type numérique. Nous aborderons la notion de données manquantes de manière plus approfondie dans les sessions ultérieures du cours.</p>
</section>
<section id="sec-functions" class="level2">
<h2 class="anchored" data-anchor-id="sec-functions">Les fonctions</h2>
<p>Les fonctions sont des objets qui contiennent <em>des commandes</em> (au lieu de valeurs) qui sont exécutées chaque fois que la fonction est appelée. Vous connaissez sans doute les fonctions d’Excel telles que <code>SUM</code> ou <code>MEAN</code> et l’idée des fonctions dans R est exactement la même.</p>
<p>La plupart des fonctions nécessitent une certaine forme d’entrée, comme un ensemble de données ou un paramètre. Ces entrées sont appelées <em>arguments</em> et sont normalement nommés. Par exemple, lorsque nous avons exécuté <code>sum(cases)</code> nous avons fourni le vecteur <code>cases</code> comme premier (et seul) argument de la fonction <code>sum()</code>.</p>
<p>Souvent, une fonction combinera les deux éléments suivants <em>nécessaire</em> et <em>facultatif</em> facultatifs. Le premier argument d’une fonction est presque toujours obligatoire et est généralement un ensemble de données. En tant qu’argument obligatoire et plutôt évident, la plupart des gens omettent son nom lorsqu’ils appellent une fonction, c’est-à-dire qu’ils écrivent <code>mean(cases)</code> au lieu de <code>mean(x = cases)</code>. Les arguments facultatifs, en revanche, sont généralement ajoutés en utilisant leur nom, c’est-à-dire : : <code>mean(x = cases, na.rm = TRUE)</code>.</p>
<p>Les arguments facultatifs ont généralement des valeurs par défaut et nous ne les incluons que lorsque nous voulons modifier leurs valeurs par défaut (et donc modifier le comportement par défaut de la fonction). Par exemple, la fonction <code>na.rm</code> de la fonction <code>mean()</code> détermine si R ignorera les valeurs manquantes lors du calcul d’une moyenne. L’état par défaut de la fonction <code>na.rm</code> est <code>FALSE</code> Ainsi, par défaut, la moyenne calculée sur des données avec des valeurs manquantes renverra toujours <code>NA</code> comme résultat :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Ceci est vrai pour de nombreuses opérations arithmétiques dans R. Si nous voulons que R calcule la moyenne sur n’importe quelles données <em>est</em> disponibles (et ignorer les valeurs manquantes), nous devons explicitement paramétrer <code>na.rm = TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notez que les arguments sont séparés par des virgules. Ces virgules doivent toujours être suivies d’un espace et chaque fois qu’un argument nommé est utilisé, l’attribut <code>=</code> doit être entouré d’espaces :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cases,<span class="at">na.rm=</span><span class="cn">TRUE</span>)     <span class="co"># BAD</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># GOOD</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Au fur et à mesure que vous travaillez avec des fonctions de plus en plus complexes, il se peut que vous commenciez à avoir des <em>beaucoup</em> d’arguments. Pour des raisons de lisibilité, il est généralement recommandé de séparer chaque argument sur sa propre ligne :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cases, </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Que se passe-t-il si nous plaçons les arguments dans le mauvais ordre ? Si vous avez indiqué le nom des arguments dans votre commande, la fonction fonctionnera toujours exactement comme prévu. Ceci étant dit, cela rendrait votre code plus difficile à lire et nous vous encourageons à vous en tenir à un ordre standard en plaçant les arguments obligatoires comme les données en premier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># technically functional but hard to read:</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>,  </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> cases) </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># better:</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cases,         </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Bien entendu, si vous ne respectez pas l’ordre des arguments et des <em>n’a pas</em> n’a pas inclus leurs noms, votre code ne fonctionnera pas comme prévu, voire produira une erreur :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="cn">TRUE</span>, cases)   <span class="co"># not what you expect</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cest-fait" class="level2">
<h2 class="anchored" data-anchor-id="cest-fait">C’est fait !</h2>
<p>C’est tout pour cette session, félicitations pour vos premiers pas avec R et RStudio !</p>
<div class="cell">
<div class="cell-output-display">
<a href="https://github.com/epicentre-msf/repicentre/blob/main/sessions_core/01_introduction_solutions.R">
<button class="btn btn-default"><i class="fa fa-save"></i> Solution File</button>
</a>
</div>
</div>


</section>
</div>
</section>
</section>
</div>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>